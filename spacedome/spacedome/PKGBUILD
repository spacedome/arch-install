# Maintainer: Julien <julien@spacedome.tv>
pkgbase='spacedome'
pkgname=(spacedome-base spacedome-common spacedome-plasma spacedome-uefi spacedome-t470)
pkgver=1
pkgrel=1
pkgdesc="System config - spacedome"
arch=(any)
url="https://github.com/spacedome/arch"
license=(MIT)
groups=(spacedome)

source=(
    spacedome-base.sudoers
)

sha256sums=(SKIP)

package_spacedome-base() {
    install=spacedome-base.install

    # base (without jfsutils, nano, netctl, reiserfsprogs)
    depends=(bash bzip2 coreutils cryptsetup device-mapper dhcpcd diffutils
             e2fsprogs file filesystem findutils gawk gcc-libs gettext glibc
             grep gzip inetutils iproute2 iputils less licenses linux 
	     linux-firmware logrotate lvm2 man-db man-pages mdadm pacman pciutils
	     perl procps-ng psmisc s-nail sed shadow sysfsutils systemd-sysvcompat
	     tar texinfo usbutils util-linux vi which xfsprogs)

    # base-devel
    depends=(autoconf automake binutils bison fakeroot flex gawk gcc groff
             libtool m4 make patch pkgconf sudo systemd) 

    # Extra general packages
    depends+=(ripgrep exa tmux wget unzip python dialog pacman-contrib
              openssh fish dhcpcd stow parted par2cmdline git cmake)

    install -Dm 0640 spacedome-base.sudoers "${pkgdir}/etc/sudoers.d/spacedome-base"

    # Debugging tools
    depends+=(lsof bind-tools mtr glances openbsd-netcat strace)

    # Filesystems
    depends+=(exfat-utils dosfstools btrfs-progs)

    # Fonts
    depends+=(noto-fonts noto-fonts-cjk noto-fonts-emoji noto-fonts-extra
              ttf-dejavu ttf-fira-san ttf-fira-code ttf-fira-mono)
}

package_spacedome-common() {
    depends=(spacedome-base)

    depends+=(alacritty firefox cups cups-pdf texlive-most syncthing redshift
              youtube-dl mpv smplayer zathura zathura-pdf-mupdf okular deluge
	      gimp krita hunspell hunspell-en_US sxiv gnome-disk-utility xsane
	      krita-plugin-gmic anki blender dwd+rw-tools emacs inkscape)

    depends+=(julia jupyter jupyterlab python-matplotlib python-black hugo
              python-pip gcc-fortran arpack python-pylint python-sympy)

}

package_spacedome-plasma() {
	install=spacedome-plasma.install
	depends=(spacedome-base)
	depends+=(xf86-video-vesa xorg-server xorg-bdftopcf xorg-iceauth
	          xorg-luit xorg-mkfontscale xorg-sessreg xorg-setxkbmap
		  xorg-smproxy xorg-x11perf xorg-xauth xorg-xbacklight
		  xorg-xcmsdb xorg-xcursorgen xorg-xdpyinfo xorg-xdriinfo
		  xorg-xev xorg-xgamma xorg-xhost xorg-xinput xorg-xkbcomp
		  xorg-xkbevd xorg-xkbutils xorg-xkill xorg-xlsatoms
		  xorg-xlsclients xorg-xmodmap xorg-xpr xorg-xprop xorg-xrandr
		  xorg-xrdb xorg-xrefresh xorg-xset xorg-xsetroot xorg-xvinfo
		  xorg-xwd xorg-xwininfo xorg-xwud)
	depends+=(plasma-meta dolphin sddm sddm-kcm kde-gtk-config)
}

package_spacedome-uefi() {
    depends=(spacedome-common refind-efi)
}

package_spacedome-t470() {
    depends=(spacedome-uefi spacedome-plasma powertop intel-media-driver)
}

